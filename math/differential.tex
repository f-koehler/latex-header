\ExplSyntaxOn{}

\DeclareDocumentCommand\diff{o}{\IfNoValueTF{#1}{\mathup{d}}{\mathup{d}^#1}}

\ExplSyntaxOff{}
